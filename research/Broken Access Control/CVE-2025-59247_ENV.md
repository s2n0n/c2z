# Replication Environment Tech Spec

## 대상 소프트웨어(Target Application Specification)

- 제품명/버전 :
  - Microsoft Azure PlayFab ([PlayFab](https://playfab.com/))
  - 따로 버전이 없음. 과거 버전 구하기는 거의 불가 / 다운로드 개념 X
- 배포 방식 : PlayFab 포털 / Azure 포털 기반으로 사용 가능

---

## 시스템 환경(System Environment)

- 공개 문서 기준으로 정확한 OS, 커널, Web Server, DB 버전은 제공 X
- Application Stack 의 경우 PlayFab이 MS의 일부이기 때문에 ".NET/C#"기반 구조와 잘 연동되도록 설계되어있는 듯 함
  - ([reference](https://www.softacom.com/wiki/development/future-of-dot-net/?utm_source=chatgpt.com)) "Its use of reusable components and shared codebases across platforms reduces development time and costs."
---

## PoC 실행 환경(PoC Execution Environment)

- pseudo-code
```python
# 취약한 권한 체크 (가상 코드)
def check_admin_permission(request):
    # 쿠키에서 역할 정보 읽기
    session_data = request.cookies.get('playfab_session')
    user_role = json.loads(session_data).get('role')
    
    # ❌ 문제: 서명/무결성 검증 없이 클라이언트 값 신뢰
    if user_role == 'admin':
        return True
    return False

# 민감한 API 엔드포인트
@app.route('/admin/grant_premium_currency', methods=['POST'])
def grant_currency():
    if not check_admin_permission(request):
        return {"error": "Forbidden"}, 403
    
    # 관리자 권한으로 가상 화폐 지급
    player_id = request.json.get('player_id')
    amount = request.json.get('amount')
    grant_virtual_currency(player_id, amount)
    return {"success": True}
```
- 

---

## 이 외 필요한 조건

예:

- AbuseFilter API의 Protected Variables 접근 권한 체크가 비활성화된 상태
- JWT secret이 `default_secret`으로 설정되어 있음
- Anonymous user라도 `/api/checkmatch` 호출 가능
- CSRF token 검증이 Dispatcher 단계에서 스킵됨
